%YAML 1.2
---
# https://www.sublimetext.com/docs/3/syntax.html
# https://www.sublimetext.com/docs/3/scope_naming.html
name: Gemini
file_extensions: [gemini, gmi]
scope: text.gemini
contexts:
  main:
    - scope: markup.heading.gemini
      match: '^#.*$\n?'
      
    - #scope: markup.underline.link
      # For some reason, [:blank:] doesnâ€™t work here
      match: '^(=>)[\t\x20]*(\S+)(?:[\t\x20]+(.*))?$\n?'
      captures:
        1: markup.quote.gemini
        2: markup.underline.link
        3: markup.heading.gemini
      
    - scope: markup.list.unnumbered
      match: '^\* .*$\n?'

    - scope: markup.quote
      match: '^>[:blank:]*.*$\n?'

    - scope: markup.preformatted # non-standard
      push: preformatted
      match: '^```.*$'
  
  preformatted:
    - match: '^```'
      pop: true
